ARQUITECTURA DEL SISTEMA PUNTO DE VENTA
=====================================

┌─────────────────────────────────────────────────────────────────┐
│                    APLICACIÓN PRINCIPAL                          │
│                      Main.java                                   │
└────────────────────┬────────────────────────────────────────────┘
                     │
                     ▼
        ┌────────────────────────┐
        │   VentanaLogin         │
        │  (Autenticación)       │
        │ Usuario: ELOPEZ        │
        │ Contraseña: 1234       │
        └────────────┬───────────┘
                     │
                     ▼ (Exitoso)
        ┌─────────────────────────────┐
        │   VentanaPrincipal          │
        │   (Menú Principal)          │
        └──┬──────────┬──────────┬─────┴───┬─────────┬─────────┘
           │          │          │         │         │
    ┌──────▼──┐ ┌────▼──────┐ ┌─▼────────┐ ┌─▼──────┐ ┌─▼───────┐
    │  Venta  │ │Inventario │ │ Kardex   │ │Historial│ │Reportes │
    │         │ │           │ │          │ │ Ventas  │ │         │
    └────┬────┘ └────┬──────┘ └─┬────────┘ └────┬───┘ └─┬───────┘
         │           │          │               │       │
    ┌────▼────────────▼──────────▼───────────────▼───────▼────┐
    │          GestorDatosV2 (Singleton)                       │
    │  (Gestión de datos en memoria)                           │
    │                                                           │
    │  ├─ Productos          (List<Producto>)                 │
    │  ├─ Ventas             (List<Venta>)                    │
    │  ├─ Kardex             (List<MovimientoKardex>)         │
    │  ├─ Usuarios           (List<Usuario>)                  │
    │  └─ Usuario Actual     (Usuario)                        │
    └────┬───────────────────────────────────────────────────┘
         │
         ▼
    ┌──────────────────────────────────┐
    │   PersistenciaDatos              │
    │   (Guardado en archivos)         │
    └────┬─────────────────────────────┘
         │
    ┌────┴──────┬──────────┬──────────┬──────────┐
    │            │          │          │          │
    ▼            ▼          ▼          ▼          ▼
┌────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌──────────┐
│productos│ │ ventas  │ │ kardex  │ │ usuarios│ │  datos/  │
│  .dat   │ │  .dat   │ │  .dat   │ │  .dat   │ │ (carpeta)│
└────────┘ └─────────┘ └─────────┘ └─────────┘ └──────────┘

====================================================================
MODELOS DE DATOS
====================================================================

┌────────────────────┐
│    Producto        │
├────────────────────┤
│ - codigo: String   │
│ - nombre: String   │
│ - precio: double   │
│ - stock: int       │
└────────────────────┘
         │
         ├─► Usado en ItemVenta
         │
         └─► Usado en MovimientoKardex

┌────────────────────┐
│    ItemVenta       │
├────────────────────┤
│ - producto: Producto │
│ - cantidad: int    │
│ - subtotal: double │
└────────────────────┘
         │
         └─► Contenido en Venta

┌────────────────────┐
│      Venta         │
├────────────────────┤
│ - id: String       │
│ - fecha: LocalDate │
│ - items: List      │
│ - total: double    │
│ - descuento: double│
└────────────────────┘
         │
         └─► Genera MovimientoKardex (SALIDA)

┌────────────────────────────┐
│   MovimientoKardex         │
├────────────────────────────┤
│ - codigo: String           │
│ - producto: String         │
│ - tipo: TipoMovimiento     │
│   (ENTRADA, SALIDA, AJUSTE)│
│ - cantidad: int            │
│ - stockAnterior: int       │
│ - stockNuevo: int          │
│ - fecha: LocalDateTime     │
│ - referencia: String       │
│ - usuario: String          │
│ - precioUnitario: double   │
└────────────────────────────┘

┌────────────────────┐
│     Usuario        │
├────────────────────┤
│ - usuario: String  │
│ - contraseña: Str. │
│ - nombre: String   │
│ - rol: String      │
│   (ADMIN/VENDEDOR) │
└────────────────────┘

====================================================================
FLUJO DE UNA VENTA
====================================================================

1. PANTALLA DE VENTA
   ├─ Seleccionar Producto
   ├─ Ingresar Cantidad
   ├─ Agregar al Carrito
   └─ (Repetir pasos 1-3 para más productos)

2. CALCULAR TOTAL
   ├─ Aplicar descuento (opcional)
   └─ Mostrar total

3. COMPLETAR VENTA
   ├─ Crear Venta con items
   ├─ Registrar en gestor
   │  ├─ Actualizar stock de productos
   │  └─ Crear MovimientoKardex (SALIDA) para cada item
   ├─ Guardar datos en archivos
   └─ Mostrar confirmación

4. KARDEX ACTUALIZADO
   └─ Nuevo movimiento visible en módulo Kardex

====================================================================
FLUJO DE KARDEX
====================================================================

ENTRADA
├─ Stock inicial al agregar producto
├─ Compras o adiciones
└─ Registrada por usuario

SALIDA
├─ Al realizar venta
├─ Stock se actualiza automáticamente
├─ Movimiento registrado con referencia de venta
└─ Usuario que vendió queda registrado

AJUSTE
├─ Cambio manual de stock
├─ Correcciones de inventario
└─ Registro de cambio

====================================================================
SEGURIDAD Y ACCESO
====================================================================

LOGIN
│
├─ Credenciales correctas → Autenticación exitosa
│  ├─ Usuario: ELOPEZ
│  ├─ Contraseña: 1234
│  └─ Se establece usuarioActual en gestor
│
└─ Credenciales incorrectas → Error y reintentar

CONTROL DE ROLES
├─ Usuario ADMIN
│  ├─ Acceso a todas las pestañas
│  └─ Acceso a Administración
│
└─ Usuario VENDEDOR
   ├─ Acceso a: Venta, Inventario, Kardex, Historial, Reportes
   └─ Sin acceso a Administración

CIERRE DE SESIÓN
├─ Al cerrar ventana principal
├─ Guardar todos los datos
└─ Cerrar sesión de usuario

====================================================================
PERSISTENCIA Y RECUPERACIÓN
====================================================================

AL INICIAR APLICACIÓN
├─ Cargar usuarios.dat
├─ Mostrar pantalla de login
│  └─ Si archivo no existe → Crear usuario ELOPEZ por defecto
│
└─ Después de login
   ├─ Cargar productos.dat
   ├─ Cargar ventas.dat
   ├─ Cargar kardex.dat
   └─ Mostrar sistema principal

DURANTE OPERACIÓN
├─ Al registrar venta → Guardar archivos
├─ Al agregar producto → Guardar archivos
├─ Al cambiar usuario → Guardar usuarios.dat
└─ Al hacer ajuste en kardex → Guardar kardex.dat

AL CERRAR APLICACIÓN
├─ Guardar todos los cambios pendientes
├─ Escribir archivos .dat
└─ Cerrar sesión

====================================================================
ESTADÍSTICAS Y REPORTES
====================================================================

RESUMEN GENERAL
├─ Total de ventas
├─ Total dinero recaudado
├─ Cantidad de productos
├─ Valor de inventario
├─ Stock total
└─ Promedios y extremos

INVENTARIO
├─ Por cada producto:
│  ├─ Código
│  ├─ Nombre
│  ├─ Precio
│  ├─ Stock
│  └─ Valor total (Precio × Stock)
└─ Totales

PRODUCTOS MÁS VENDIDOS
├─ Ranking por cantidad
├─ Ordenado descendente
└─ Con totales

VENTAS POR DÍA
├─ Agrupadas por fecha
├─ Cantidad de transacciones
├─ Total dinero por día
└─ Resumen total

====================================================================
NOTAS TÉCNICAS
====================================================================

• Lenguaje: Java 24
• Framework GUI: Swing (JFrame, JPanel, etc.)
• Almacenamiento: Serialización de objetos (ObjectInputStream/OutputStream)
• Patrón: Singleton para GestorDatosV2
• Persistencia: Archivos .dat en carpeta datos/
• Sin dependencias externas (excepto Java estándar)
• Multihilo: No necesario (aplicación de escritorio simple)
• Concurrencia: No necesaria (usuario único por sesión)


